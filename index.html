<!doctype html>
<html lang="fr">
  <head>
    <link
  href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap"
  rel="stylesheet"
/>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TC Outil - Voyages TC Essonnes</title>
    <script>
      // Détection dynamique de l'API
      window.getApiUrl = async () => {
        const hostname = window.location.hostname;
        
        // En développement local, utilise localhost
        if (hostname === 'localhost' || hostname === '127.0.0.1') {
          return 'http://localhost:8081';
        }
        
        // En production, teste Railway d'abord, puis fallback
        try {
          const response = await fetch('https://tce-serv-rbe-serveurs.up.railway.app/health', {
            method: 'HEAD',
            mode: 'no-cors'
          });
          // Si Railway répond (même sans CORS), l'utilise
          return 'https://tce-serv-rbe-serveurs.up.railway.app';
        } catch {
          // Sinon, utilise un fallback (à mettre à jour avec Render ou autre service)
          return 'https://tce-api.example.com'; // TODO: mettre à jour avec Render
        }
      };
      
      // Initialise l'API URL
      window.RUNTIME_API_URL = 'https://tce-serv-rbe-serveurs.up.railway.app'; // Default pour maintenant
      console.log('[HTML] RUNTIME_API_URL:', window.RUNTIME_API_URL);
    </script>
  </head>
  <body>
<div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
